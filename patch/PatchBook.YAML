# [PackageDev] target_format: plist, ext: tmLanguage
---
name: PatchBook
scopeName: source.patch
fileTypes: [patch, patchml]

variables:
  voiceIdentifier: (\bVOICE\b)
  outputModule: ()
  label: ([^\(]+(?=\)))
  outputLabel: ({{label}})
  inputModule: ()
  inputLabel: ({{label}})
  cvConnector: (>>)
  pitchConnector: (p>)
  gateConnector: (g>)
  triggerConnector: (t>)
  clockConnector: (c>)
  parameter: (*\s)
  argument: (\[(.*?)\])
  hexNumber: \b(?<!\$)0(x|X)[0-9a-fA-F][0-9a-fA-F_]*\b(?!\$)
  binaryNumber: \b(?<!\$)0(b|B)[01][01_]*\b(?!\$)
  octalNumber: \b(?<!\$)0(o|O)?[0-7][0-7_]*\b(?!\$)
  decimalNumber: |-
    (?<!\$)(?:
      (?:\b[0-9][0-9_]*(\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\b)| # 1.1E+3
      (?:\b[0-9][0-9_]*(\.)[eE][+-]?[0-9][0-9_]*\b)|             # 1.E+3
      (?:\B(\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\b)|             # .1E+3
      (?:\b[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\b)|                 # 1E+3
      (?:\b[0-9][0-9_]*(\.)[0-9][0-9_]*\b)|                      # 1.1
      (?:\b[0-9][0-9_]*(\.)\B)|                                  # 1.
      (?:\B(\.)[0-9][0-9_]*\b)|                                  # .1
      (?:\b[0-9][0-9_]*\b(?!\.))                                 # 1
    )(?!\$)
  anyNumber: ({{hexNumber}})|({{binaryNumber}})|({{octalNumber}})|({{decimalNumber}})